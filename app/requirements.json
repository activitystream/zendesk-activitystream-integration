{
    "targets": {
        "activitystream": {
            "title": "Notify Activity Stream",
            "type": "http_target",
            "active": false,
            "created_at": "2015-06-02T12:00:54.104Z",
            "target_url": "http://74.208.68.59/zendesk?api={{setting.token}}",
            "method": "post",
            "content_type": "application/json"
        },
        "an_email_target": {
            "title": "A sample email Target",
            "type": "email_target",
            "active": true,
            "email": "petar@activitystream.com",
            "subject": "Hello, from this target!"
        }
    },
    "triggers": {
        "notify_as_on_ticket_comments_change": {
            "title": "Notify Activity Stream on ticket comments Changed",
            "all": [
                {
                    "field": "update_type",
                    "operator": "is",
                    "value": "Change"
                },
                {
                    "field": "comment_is_public",
                    "operator": "is",
                    "value": "true"
                }
            ],
            "actions": [
                {
                    "field": "notification_target",
                    "value": [
                        "activitystream",
                        "{\"id\" : \"{{ticket.id}}\",\"type\" : \"{{ticket.type}}\",\"title\" : \"{{ticket.title}}\",\"description\" : \"{{ticket.description}}\",\"position\" : \"{{ticket.position}}\",\"active\" : \"{{ticket.active}}\",\"required\" : \"{{ticket.required}}\",\"title_in_portal\" : \"{{ticket.title_in_portal}}\",\"requester_email\" : \"{{ticket.requester.email}}\",\"assignee_email\" : \"{{ticket.assignee.email}}\",\"submitter_email\" : \"{{ticket.submitter.email}}\",\"current_user\" : \"{{current_user.email}}\",\"custom_fields\" : \"{% for item in ticket.organization.custom_fields %}{{ item[0] }}:{{ item[1] }}{% endfor %}\",\"ticket_custom_fields\" : \"{% for item in ticket.custom_fields %}{{ item[0] }}:{{ item[1] }}{% endfor %}\",\"requester_custom_fields\" : \"{% for item in ticket.requester.custom_fields %}{{ item[0] }}:{{ item[1] }}{% endfor %}\",\"comments\" : \"{{ticket.comments_formatted}}\",\"tags\" : \"{{ticket.tags}}\",\"account\" : \"{{ticket.account}}\",\"ccs\" : \"{% for cc in ticket.ccs %}{{cc.email}} {% endfor %}\",\"created_at_with_timestamp\" : \"{{ticket.created_at_with_timestamp}}\",\"due_date_with_timestamp\" : \"{{ticket.due_date_with_timestamp}}\",\"external_id\" : \"{{ticket.external_id}}\",\"group.name\" : \"{{ticket.group.name}}\",\"in_business_hours\" : \"{{ticket.in_business_hours}}\",\"organization.name\" : \"{{ticket.organization.name}}\",\"priority\" : \"{{ticket.priority}}\",\"score\" : \"{{ticket.score}}\",\"status\" : \"{{ticket.status}}\",\"ticket_type\" : \"{{ticket.ticket_type}}\",\"updated_at_with_timestamp\" : \"{{ticket.updated_at_with_timestamp}}\",\"url_with_protocol\" : \"{{ticket.url_with_protocol}}\",\"via\" : \"{{ticket.via}}\",\"_as_event\" : \"comments.changed\"}"
                    ]
                }
            ]
        },
        "notify_as_on_ticket_created": {
            "title": "Notify Activity Stream on ticket created",
            "all": [
                {
                    "field": "update_type",
                    "operator": "is",
                    "value": "Create"
                }
            ],
            "any": [],
            "actions": [
                {
                    "field": "notification_target",
                    "value": [
                        "activitystream",
                        "{\"id\" : \"{{ticket.id}}\",\"type\" : \"{{ticket.type}}\",\"title\" : \"{{ticket.title}}\",\"description\" : \"{{ticket.description}}\",\"position\" : \"{{ticket.position}}\",\"active\" : \"{{ticket.active}}\",\"required\" : \"{{ticket.required}}\",\"title_in_portal\" : \"{{ticket.title_in_portal}}\",\"requester_email\" : \"{{ticket.requester.email}}\",\"assignee_email\" : \"{{ticket.assignee.email}}\",\"submitter_email\" : \"{{ticket.submitter.email}}\",\"current_user\" : \"{{current_user.email}}\",\"custom_fields\" : \"{% for item in ticket.organization.custom_fields %}{{ item[0] }}:{{ item[1] }}{% endfor %}\",\"ticket_custom_fields\" : \"{% for item in ticket.custom_fields %}{{ item[0] }}:{{ item[1] }}{% endfor %}\",\"requester_custom_fields\" : \"{% for item in ticket.requester.custom_fields %}{{ item[0] }}:{{ item[1] }}{% endfor %}\",\"comments\" : \"{{ticket.comments_formatted}}\",\"tags\" : \"{{ticket.tags}}\",\"account\" : \"{{ticket.account}}\",\"ccs\" : \"{% for cc in ticket.ccs %}{{cc.email}} {% endfor %}\",\"created_at_with_timestamp\" : \"{{ticket.created_at_with_timestamp}}\",\"due_date_with_timestamp\" : \"{{ticket.due_date_with_timestamp}}\",\"external_id\" : \"{{ticket.external_id}}\",\"group.name\" : \"{{ticket.group.name}}\",\"in_business_hours\" : \"{{ticket.in_business_hours}}\",\"organization.name\" : \"{{ticket.organization.name}}\",\"priority\" : \"{{ticket.priority}}\",\"score\" : \"{{ticket.score}}\",\"status\" : \"{{ticket.status}}\",\"ticket_type\" : \"{{ticket.ticket_type}}\",\"updated_at_with_timestamp\" : \"{{ticket.updated_at_with_timestamp}}\",\"url_with_protocol\" : \"{{ticket.url_with_protocol}}\",\"via\" : \"{{ticket.via}}\",\"_as_event\" : \"ticket.created\"}"
                    ]
                }
            ]
        },
        "notify_as_on_assignee_changed": {
            "title": "Notify Activity Stream on assignee changed",
            "all": [
                {
                    "field": "assignee_id",
                    "operator": "changed",
                    "value": null
                }
            ],
            "any": [],
            "actions": [
                {
                    "field": "notification_target",
                    "value": [
                        "activitystream",
                        "{\"id\" : \"{{ticket.id}}\",\"type\" : \"{{ticket.type}}\",\"title\" : \"{{ticket.title}}\",\"description\" : \"{{ticket.description}}\",\"position\" : \"{{ticket.position}}\",\"active\" : \"{{ticket.active}}\",\"required\" : \"{{ticket.required}}\",\"title_in_portal\" : \"{{ticket.title_in_portal}}\",\"requester_email\" : \"{{ticket.requester.email}}\",\"assignee_email\" : \"{{ticket.assignee.email}}\",\"submitter_email\" : \"{{ticket.submitter.email}}\",\"current_user\" : \"{{current_user.email}}\",\"custom_fields\" : \"{% for item in ticket.organization.custom_fields %}{{ item[0] }}:{{ item[1] }}{% endfor %}\",\"ticket_custom_fields\" : \"{% for item in ticket.custom_fields %}{{ item[0] }}:{{ item[1] }}{% endfor %}\",\"requester_custom_fields\" : \"{% for item in ticket.requester.custom_fields %}{{ item[0] }}:{{ item[1] }}{% endfor %}\",\"comments\" : \"{{ticket.comments_formatted}}\",\"tags\" : \"{{ticket.tags}}\",\"account\" : \"{{ticket.account}}\",\"ccs\" : \"{% for cc in ticket.ccs %}{{cc.email}} {% endfor %}\",\"created_at_with_timestamp\" : \"{{ticket.created_at_with_timestamp}}\",\"due_date_with_timestamp\" : \"{{ticket.due_date_with_timestamp}}\",\"external_id\" : \"{{ticket.external_id}}\",\"group.name\" : \"{{ticket.group.name}}\",\"in_business_hours\" : \"{{ticket.in_business_hours}}\",\"organization.name\" : \"{{ticket.organization.name}}\",\"priority\" : \"{{ticket.priority}}\",\"score\" : \"{{ticket.score}}\",\"status\" : \"{{ticket.status}}\",\"ticket_type\" : \"{{ticket.ticket_type}}\",\"updated_at_with_timestamp\" : \"{{ticket.updated_at_with_timestamp}}\",\"url_with_protocol\" : \"{{ticket.url_with_protocol}}\",\"via\" : \"{{ticket.via}}\",\"_as_event\" : \"assignee.changed\"}"
                    ]
                }
            ]
        },
        "notify_as_on_ticket_promoted": {
            "title": "Notify Activity Stream on ticket promoted",
            "all": [
                {
                    "field": "priority",
                    "operator": "value",
                    "value": "normal"
                },
                {
                    "field": "priority",
                    "operator": "value_previous",
                    "value": "low"
                }
            ],
            "any": [],
            "actions": [
                {
                    "field": "notification_target",
                    "value": [
                        "activitystream",
                        "{\"id\" : \"{{ticket.id}}\",\"type\" : \"{{ticket.type}}\",\"title\" : \"{{ticket.title}}\",\"description\" : \"{{ticket.description}}\",\"position\" : \"{{ticket.position}}\",\"active\" : \"{{ticket.active}}\",\"required\" : \"{{ticket.required}}\",\"title_in_portal\" : \"{{ticket.title_in_portal}}\",\"requester_email\" : \"{{ticket.requester.email}}\",\"assignee_email\" : \"{{ticket.assignee.email}}\",\"submitter_email\" : \"{{ticket.submitter.email}}\",\"current_user\" : \"{{current_user.email}}\",\"custom_fields\" : \"{% for item in ticket.organization.custom_fields %}{{ item[0] }}:{{ item[1] }}{% endfor %}\",\"ticket_custom_fields\" : \"{% for item in ticket.custom_fields %}{{ item[0] }}:{{ item[1] }}{% endfor %}\",\"requester_custom_fields\" : \"{% for item in ticket.requester.custom_fields %}{{ item[0] }}:{{ item[1] }}{% endfor %}\",\"comments\" : \"{{ticket.comments_formatted}}\",\"tags\" : \"{{ticket.tags}}\",\"account\" : \"{{ticket.account}}\",\"ccs\" : \"{% for cc in ticket.ccs %}{{cc.email}} {% endfor %}\",\"created_at_with_timestamp\" : \"{{ticket.created_at_with_timestamp}}\",\"due_date_with_timestamp\" : \"{{ticket.due_date_with_timestamp}}\",\"external_id\" : \"{{ticket.external_id}}\",\"group.name\" : \"{{ticket.group.name}}\",\"in_business_hours\" : \"{{ticket.in_business_hours}}\",\"organization.name\" : \"{{ticket.organization.name}}\",\"priority\" : \"{{ticket.priority}}\",\"score\" : \"{{ticket.score}}\",\"status\" : \"{{ticket.status}}\",\"ticket_type\" : \"{{ticket.ticket_type}}\",\"updated_at_with_timestamp\" : \"{{ticket.updated_at_with_timestamp}}\",\"url_with_protocol\" : \"{{ticket.url_with_protocol}}\",\"via\" : \"{{ticket.via}}\",\"_as_event\" : \"ticket.promoted\"}"
                    ]
                }
            ]
        },
        "notify_as_on_ticket_reopened": {
            "title": "Notify Activity Stream on ticket reopened",
            "all": [
                {
                    "field": "status",
                    "operator": "less_than",
                    "value": "solved"
                }
            ],
            "any": [
                {
                    "field": "status",
                    "operator": "value_previous",
                    "value": "solved"
                },
                {
                    "field": "status",
                    "operator": "value_previous",
                    "value": "closed"
                }
            ],
            "actions": [
                {
                    "field": "notification_target",
                    "value": [
                        "activitystream",
                        "{\"id\" : \"{{ticket.id}}\",\"type\" : \"{{ticket.type}}\",\"title\" : \"{{ticket.title}}\",\"description\" : \"{{ticket.description}}\",\"position\" : \"{{ticket.position}}\",\"active\" : \"{{ticket.active}}\",\"required\" : \"{{ticket.required}}\",\"title_in_portal\" : \"{{ticket.title_in_portal}}\",\"requester_email\" : \"{{ticket.requester.email}}\",\"assignee_email\" : \"{{ticket.assignee.email}}\",\"submitter_email\" : \"{{ticket.submitter.email}}\",\"current_user\" : \"{{current_user.email}}\",\"custom_fields\" : \"{% for item in ticket.organization.custom_fields %}{{ item[0] }}:{{ item[1] }}{% endfor %}\",\"ticket_custom_fields\" : \"{% for item in ticket.custom_fields %}{{ item[0] }}:{{ item[1] }}{% endfor %}\",\"requester_custom_fields\" : \"{% for item in ticket.requester.custom_fields %}{{ item[0] }}:{{ item[1] }}{% endfor %}\",\"comments\" : \"{{ticket.comments_formatted}}\",\"tags\" : \"{{ticket.tags}}\",\"account\" : \"{{ticket.account}}\",\"ccs\" : \"{% for cc in ticket.ccs %}{{cc.email}} {% endfor %}\",\"created_at_with_timestamp\" : \"{{ticket.created_at_with_timestamp}}\",\"due_date_with_timestamp\" : \"{{ticket.due_date_with_timestamp}}\",\"external_id\" : \"{{ticket.external_id}}\",\"group.name\" : \"{{ticket.group.name}}\",\"in_business_hours\" : \"{{ticket.in_business_hours}}\",\"organization.name\" : \"{{ticket.organization.name}}\",\"priority\" : \"{{ticket.priority}}\",\"score\" : \"{{ticket.score}}\",\"status\" : \"{{ticket.status}}\",\"ticket_type\" : \"{{ticket.ticket_type}}\",\"updated_at_with_timestamp\" : \"{{ticket.updated_at_with_timestamp}}\",\"url_with_protocol\" : \"{{ticket.url_with_protocol}}\",\"via\" : \"{{ticket.via}}\",\"_as_event\" : \"ticket.reopened\"}"
                    ]
                }
            ]
        }
    }
}
